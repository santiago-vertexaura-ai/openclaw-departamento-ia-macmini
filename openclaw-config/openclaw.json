{
  "meta": {
    "lastTouchedVersion": "2026.2.6-3",
    "lastTouchedAt": "2026-02-16T09:58:44.216Z"
  },
  "wizard": {
    "lastRunAt": "2026-02-05T11:56:09.013Z",
    "lastRunVersion": "2026.1.24-3",
    "lastRunCommand": "doctor",
    "lastRunMode": "local"
  },
  "browser": {
    "enabled": true,
    "headless": false,
    "defaultProfile": "clawdbot"
  },
  "models": {
    "providers": {
      "ollama": {
        "baseUrl": "http://127.0.0.1:11434/v1",
        "apiKey": "ollama-local",
        "api": "openai-completions",
        "models": [
          {
            "id": "ollama/glm-4.7-flash",
            "name": "GLM 4.7 Flash (local)",
            "reasoning": false,
            "input": [
              "text"
            ],
            "cost": {
              "input": 0,
              "output": 0,
              "cacheRead": 0,
              "cacheWrite": 0
            },
            "contextWindow": 32768,
            "maxTokens": 8192
          }
        ]
      }
    }
  },
  "agents": {
    "defaults": {
      "model": {
        "primary": "anthropic/claude-haiku-4-5"
      },
      "workspace": "/Users/alfredpifi/clawd",
      "compaction": {
        "mode": "safeguard",
        "memoryFlush": {
          "enabled": true,
          "softThresholdTokens": 8000,
          "prompt": "MEMORY FLUSH EN PROGRESO. Antes de perder contexto, ejecuta estos pasos:\n\n1. GUARDAR EN VAULT (ejecuta cada comando):\n   - Decisiones estrategicas tomadas: /Users/alfredpifi/clawd/scripts/vault.sh add decisions \"<titulo-decision>\" \"<decision y razonamiento>\" --author alfred\n   - Feedback de Santi: /Users/alfredpifi/clawd/scripts/vault.sh add preferences \"<titulo>\" \"<que dijo Santi y por que importa>\" --author alfred\n   - Lecciones/errores: /Users/alfredpifi/clawd/scripts/vault.sh add lessons \"<titulo>\" \"<que paso y como evitarlo>\" --author alfred\n   - Estado proyectos activos: /Users/alfredpifi/clawd/scripts/vault.sh add projects \"<proyecto>\" \"<estado actual, bloqueos, siguientes pasos>\" --author alfred\n   - Configuraciones de agentes cambiadas: /Users/alfredpifi/clawd/scripts/vault.sh add decisions \"<cambio>\" \"<que se cambio y por que>\" --author alfred\n\n2. DESCARTAR sin guardar:\n   - Polls vacios (Sin tareas para Roberto/Andres/Marina)\n   - Confirmaciones rutinarias de tareas completadas\n   - Health checks sin problemas\n   - Debugging ya resuelto\n   - Raw tool output ya procesado\n   - Datos temporales ya en Supabase o Vault\n\n3. Responde con resumen breve de lo guardado.",
          "systemPrompt": "Estas haciendo un pre-compaction memory flush. Tu objetivo es preservar conocimiento critico en el Vault antes de que la conversacion se compacte. Foco en: (1) decisiones estrategicas y su razonamiento, (2) feedback y preferencias de Santi, (3) cambios en configuracion de agentes, (4) estados de proyectos activos, (5) lecciones de errores. Usa vault.sh add con categorias apropiadas. NO preserves polls vacios, task checks rutinarios, ni debugging resuelto."
        }
      },
      "timeoutSeconds": 3600,
      "typingMode": "instant",
      "heartbeat": {
        "every": "30m",
        "activeHours": {
          "start": "08:00",
          "end": "23:00",
          "timezone": "Europe/Madrid"
        },
        "target": "last"
      },
      "maxConcurrent": 4,
      "subagents": {
        "maxConcurrent": 4,
        "archiveAfterMinutes": 120,
        "thinking": "off"
      }
    },
    "list": [
      {
        "id": "main",
        "default": true,
        "subagents": {
          "allowAgents": [
            "roberto",
            "andres",
            "marina",
            "arturo",
            "alex"
          ]
        }
      },
      {
        "id": "roberto",
        "name": "Roberto",
        "workspace": "/Users/alfredpifi/clawd/workspace-roberto",
        "model": {
          "primary": "ollama/glm-4.7-flash"
        }
      },
      {
        "id": "andres",
        "name": "Andr√©s",
        "workspace": "/Users/alfredpifi/clawd/workspace-andres",
        "model": {
          "primary": "anthropic/claude-haiku-4-5"
        }
      },
      {
        "id": "marina",
        "name": "Marina",
        "workspace": "/Users/alfredpifi/clawd/workspace-marina",
        "model": {
          "primary": "ollama/glm-4.7-flash"
        }
      },
      {
        "id": "arturo",
        "name": "Arturo",
        "workspace": "/Users/alfredpifi/clawd/workspace-arturo",
        "model": {
          "primary": "ollama/glm-4.7-flash"
        }
      },
      {
        "id": "alex",
        "name": "Alex",
        "workspace": "/Users/alfredpifi/clawd/workspace-alex",
        "model": {
          "primary": "ollama/glm-4.7-flash"
        }
      }
    ]
  },
  "tools": {
    "profile": "coding",
    "allow": [
      "read",
      "exec",
      "write",
      "edit",
      "browser",
      "sessions_spawn",
      "sessions_send",
      "sessions_list",
      "assistant"
    ],
    "media": {
      "audio": {
        "enabled": true,
        "maxBytes": 20971520,
        "models": [
          {
            "type": "cli",
            "command": "whisper",
            "args": [
              "--model",
              "base",
              "--language",
              "es",
              "{{MediaPath}}"
            ],
            "timeoutSeconds": 60
          }
        ]
      }
    },
    "exec": {
      "host": "gateway",
      "security": "full",
      "ask": "off"
    },
    "subagents": {
      "tools": {
        "allow": [
          "read",
          "exec",
          "write",
          "edit",
          "browser"
        ]
      }
    }
  },
  "messages": {
    "ackReactionScope": "group-mentions",
    "tts": {
      "auto": "inbound",
      "mode": "final",
      "provider": "openai",
      "openai": {
        "apiKey": "sk-edge-tts-local",
        "voice": "es-ES-AlvaroNeural"
      },
      "edge": {
        "enabled": true,
        "voice": "es-ES-AlvaroNeural",
        "lang": "es-ES",
        "pitch": "+0%",
        "rate": "+0%"
      },
      "maxTextLength": 4000,
      "timeoutMs": 30000
    }
  },
  "commands": {
    "native": "auto",
    "nativeSkills": "auto"
  },
  "cron": {
    "enabled": true,
    "maxConcurrentRuns": 2
  },
  "channels": {
    "telegram": {
      "enabled": true,
      "dmPolicy": "pairing",
      "botToken": "7936074718:AAHe4QNMmoF-LXfOYCGza9yKzLYy-31BQB0",
      "groupPolicy": "allowlist",
      "streamMode": "partial"
    }
  },
  "gateway": {
    "port": 18789,
    "mode": "local",
    "auth": {
      "token": "[REDACTED]"
    },
    "http": {
      "endpoints": {
        "chatCompletions": {
          "enabled": true
        }
      }
    }
  },
  "plugins": {
    "entries": {
      "telegram": {
        "enabled": true
      }
    }
  },
  "update": {
    "channel": "beta"
  },
  "memory": {
  }
}
